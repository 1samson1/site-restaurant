tinymce.PluginManager.add("filemanager", function (editor, url) {
	/* Add a button that opens a window */
    editor.ui.registry.addButton("filemanager", {
        tooltip:'File manager',
		icon : 'upload',
        onAction: function () {
            /* Open window */
            fm.open(function(content){
                editor.insertContent(content);
            });
        },
    });
    /* Adds a menu item, which can then be included in any menu via the menu/menubar configuration */
    editor.ui.registry.addMenuItem("filemanager", {
        text: "File manager",
		icon : 'upload',
		context: 'insert',
        onAction: function () {
            /* Open window */
            fm.open(function(content){
                editor.insertContent(content);
            });
        },
    });

    /* Return the metadata for the help plugin */
    return {
        getMetadata: function () {
            return {
                name: "File manager",
                url: "",
            };
        },
    };
});

tinymce.PluginManager.requireLangPack("filemanager", "ru");
